/*! For license information please see main.f12130993479b6f66dbe.bundle.js.LICENSE.txt */
(()=>{var e,t={400:(e,t,s)=>{"use strict";s(260);class i extends Phaser.GameObjects.Image{constructor(e,t,s,i,a){super(e,t,s,i,a),this.scene.add.existing(this),this.clickMovingRange=7,this.touchMovingRange=5,this.scaleRatio=1.2}initButton(e){return this.upTween=this.scene.add.tween({targets:this,y:{from:this.y,to:this.y+this.clickMovingRange},duration:50,paused:!0,yoyo:!0,repeat:0,onComplete:e}),this.moveTween=this.scene.add.tween({targets:this,y:{from:this.y,to:this.y+this.touchMovingRange},duration:100,paused:!0,yoyo:!0,repeat:0}),this.scaleUp=this.scene.add.tween({targets:this,scale:this.scaleRatio,duration:500,repeat:-1,yoyo:!0,ease:"Sine.easeInOut",paused:!0}),this}setClickMovingRange(e){return this.clickMovingRange=e,this}setTouchMovingRange(e){return this.touchMovingRange=e,this}setScaleRatio(e){return this.scaleRatio=e,this}playPointerUp(){return this.moveTween.stop(),this.upTween.play(),this}playPointerMove(){return this.upTween.isPlaying()||this.moveTween.play(),this}playScale(){return this.scaleUp.play(),this}stopScale(){return this.scaleUp.stop(),this}}const a=i;class h extends Phaser.GameObjects.Container{constructor(e,t){super(e),e.add.existing(this);let s,i=e.add.image(0,0,"sprite","message/board"),a=e.add.image(35,8,"sprite","message/message-new").setVisible(!1);this.add(i).add(a).setPosition(e.cameras.main.width/2,e.cameras.main.height/2),t>=10&&t<20&&(s=e.add.image(-66,8,"sprite","medal/gold-medal-1"),this.add(s)),t>=20&&t<30&&(s=e.add.image(-66,8,"sprite","medal/silver-medal"),this.add(s)),t>=30&&t<40&&(s=e.add.image(-66,8,"sprite","medal/silver-medal-1"),this.add(s)),t>=40&&(s=e.add.image(-66,8,"sprite","medal/gold-medal-0"),this.add(s))}}const r=h,n=class{constructor(e,t,s,i,a="right"){this.scene=e,this.fontSize=t,this.scoreValue=0,this.x=s,this.y=i,this.align=a,this.scoreGroup=e.add.group(),this.initScore()}initScore(){let e=0;for(let t=0;t<3;t++)for(let s=0;s<=9;s++){let i=this.scene.add.image(this.x,this.y,"sprite",`digit/digit-${this.fontSize}-${s}`).setVisible(!1);0==s&&0==t&&(e=i.width),i.setX(this.x-t*e).setDepth(5),this.scoreGroup.add(i),this.scene.add.existing(i)}}start(){this.scoreGroup.getChildren()[0].setVisible(!0)}destroy(){this.scoreGroup.setVisible(!1)}getScore(){return this.scoreValue}setScore(e){e>0?(this.scoreValue=e,this.updateDisplay()):this.start()}increaseScore(){this.scoreValue++,this.updateDisplay()}updateDisplay(){let e=Math.floor((this.scoreValue-1)/100)%10,t=Math.floor((this.scoreValue-1)/10)%10,s=(this.scoreValue-1)%10,i=this.scoreGroup.getChildren(),a=20+e,h=10+t,r=s;i[a].setVisible(!1),i[h].setVisible(!1),i[r].setVisible(!1),r++,10==r&&(r=0,h++,20==h&&(h=10,a++,30==a&&(a=20))),20!=a&&i[a].setVisible(!0),20==a&&10==h||i[h].setVisible(!0),i[r].setVisible(!0),10!=this.scoreValue&&100!=this.scoreValue||("center"==this.align&&this.alignCenter(),"left"==this.align&&this.alignLeft())}alignCenter(){let e=this.scoreGroup.getChildren();Phaser.Actions.IncX(this.scoreGroup.getChildren(),e[0].width/2)}alignLeft(){let e=this.scoreGroup.getChildren();Phaser.Actions.IncX(this.scoreGroup.getChildren(),e[0].width)}};class o extends Phaser.Scene{constructor(){super({key:"GameOverScene"}),this.playerStore=0,this.handleClickPlay=()=>{this.cameras.main.fadeOut(250,0,0,0)}}create(e){this.playerStore=e.playerScore,this.gameOver=this.add.image(this.cameras.main.width/2,160,"sprite","message/message-game-over"),this.scoreBoard=new r(this,this.playerStore),this.scoreBoard.setAlpha(0),this.score=new n(this,20,this.cameras.main.width-60,this.cameras.main.height/2-15),this.highScore=new n(this,20,this.cameras.main.width-60,this.cameras.main.height/2+27),this.tweens.add({targets:this.scoreBoard,props:{alpha:1},duration:300,repeat:!1}),this.handleScore(this.playerStore),this.playButton=new a(this,this.cameras.main.width/2,370,"sprite","button/button-playgame"),this.playButton.initButton(this.handleClickPlay).setDepth(5).setInteractive().setVisible(!1).once("pointerup",(e=>{this.playButton.playPointerUp()})).on("pointermove",(e=>{this.playButton.playPointerMove()})),this.time.delayedCall(500,(()=>{this.playButton.setVisible(!0)})),this.addInput()}addInput(){this.keys=this.input.keyboard.addKey("Enter"),this.time.delayedCall(500,(()=>{this.keys.on("down",(()=>{this.cameras.main.fadeOut(250,0,0,0)}))})),this.cameras.main.once(Phaser.Cameras.Scene2D.Events.FADE_OUT_COMPLETE,((e,t)=>{this.time.delayedCall(200,(()=>{this.scene.start("PlayScene")}))}))}handleScore(e){this.score.setScore(this.playerStore),null===localStorage.getItem("highScore")||e>this.getHighScore()?this.saveHighScore(e):this.highScore.setScore(this.getHighScore())}saveHighScore(e){localStorage.setItem("highScore",e.toString()),this.highScore.setScore(e),this.scoreBoard.getAt(1).setVisible(!0)}getHighScore(){return Number(localStorage.getItem("highScore"))}}const l=o;class d extends Phaser.Scene{constructor(){super({key:"LoadingScene"})}preload(){this.cameras.main.setBackgroundColor(10016391),this.createLoadingBar(),this.load.on("progress",(e=>{this.progressBar.clear(),this.progressBar.fillStyle(16774867,1),this.progressBar.fillRect(this.cameras.main.width/4,this.cameras.main.height/2-16,this.cameras.main.width/2*e,16)}),this),this.load.on("complete",(()=>{this.progressBar.destroy(),this.loadingBar.destroy()}),this)}update(){this.scene.start("PlayScene")}createLoadingBar(){this.loadingBar=this.add.graphics(),this.loadingBar.fillStyle(6139463,1),this.loadingBar.fillRect(this.cameras.main.width/4-2,this.cameras.main.height/2-18,this.cameras.main.width/2+4,20),this.progressBar=this.add.graphics()}}const c=d;class p extends Phaser.Scene{constructor(){super({key:"PauseScene"}),this.resumePlayScene=()=>{this.scene.resume("PlayScene"),this.resumeButton.setVisible(!1),this.screenContainer.setPauseButtonVisible(!0)}}create(e){this.screenContainer=e.screenContainer,this.resumeButton=new a(this,30,30,"sprite","button/button-play"),this.resumeButton.initButton(this.resumePlayScene).setDepth(5).setVisible(!0).setInteractive().on("pointerup",(e=>{this.resumeButton.playPointerUp()})),this.input.keyboard.on("keydown-SPACE",this.resumePlayScene,this)}}const u=p,m="background_day",g="background_night",y="flappingDust",b="background",w="hit",f="score",S="flap";class P extends Phaser.GameObjects.Sprite{constructor(e){super(e,0,0,"sprite","ground"),this.x=0,this.y=400,e.physics.world.enable(this),e.add.existing(this),this.body.setGravityY(0).setVelocityX(-120),this.body.immovable=!0,this.setDepth(10).play("ground").setOrigin(0,0)}update(){this.x<=-(this.width-this.scene.cameras.main.width)&&this.setX(0)}pause(){this.body.setVelocityX(0)}}const v=P;class B extends Phaser.GameObjects.TileSprite{constructor(e,t,s){super(e,t,s,288,512,[m,g][Phaser.Math.Between(0,1)]),this.x=t,this.y=s,this.setDepth(1),e.add.existing(this)}}const C=B;class k extends Phaser.GameObjects.Sprite{constructor(e,t,s){super(e,0,0,""),this.idle=!0,this.isDeath=!1,this.freeFalling=!1,this.hitPipe=!1,this.allowFly=!0,this.setPosition(t,s),this.dustAnimation=new class{constructor(e){this.source=e,this.scene=e.scene,this.initEmitter(),this.createFlyEmitter()}initEmitter(){this.flyEmiiterManager=this.scene.add.particles("flappingDust"),this.flyEmiiterManager.setDepth(10)}createFlyEmitter(){this.flyEmiiterManager.createEmitter({speed:300,angle:{min:110,max:160,steps:10},alpha:{start:1,end:0},lifespan:300,blendMode:"SCREEN",scale:{start:1,end:1.5},quantity:10,on:!1})}playFly(){let e=this.source.x-.5*this.source.width,t=this.source.y;this.flyEmiiterManager.emitParticleAt(e,t)}}(this),this.color=["yellow","red","blue"][Phaser.Math.Between(0,2)],this.anims.create({key:"chill_flapping",frames:this.anims.generateFrameNames("sprite",{prefix:`bird/${this.color}-bird-`,end:2}),frameRate:8,repeat:-1}),this.chilling=e.tweens.add({targets:this,y:{from:this.y+3,to:this.y-3},duration:360,paused:!1,yoyo:!0,repeat:-1}),e.physics.world.enable(this),e.add.existing(this),this.setDepth(6).play("chill_flapping"),this.body.setOffset(4,-1).setMaxVelocityY(500).setBounceY(0).setCollideWorldBounds(!0).setCircle(.7*this.width*.55).setBoundsRectangle(new Phaser.Geom.Rectangle(0,-10,this.scene.cameras.main.width,this.scene.cameras.main.height)),this.flapSound=this.scene.sound.add(S)}setPlay(){this.chilling.stop(),this.anims.remove("chill_flapping"),this.anims.create({key:"rapid_flapping",frames:this.anims.generateFrameNames("sprite",{prefix:`bird/${this.color}-bird-`,end:2}),frameRate:16,repeat:-1}),this.play("rapid_flapping"),this.jump()}jump(){this.dustAnimation.playFly(),this.flapSound.play(),this.body.setVelocityY(-350).setGravityY(1200),this.freeFalling&&this.anims.resume(),this.scene.tweens.add({targets:this,props:{angle:-20},duration:150,ease:"Power0"})}setDie(){if(this.angle<90){let e=this.scene.tweens.add({targets:this,props:{angle:90},duration:200,loop:!1,onComplete:()=>{e.stop()}})}}preUpdate(e,t){super.preUpdate(e,t),!this.idle&&this.body.velocity.y>=380&&(this.angle>=-20&&this.angle<90&&(this.angle+=5),"bird/yellow-bird-1"==this.anims.currentFrame.textureFrame&&this.anims.pause(),this.freeFalling=!0)}}const x=k;class G extends Phaser.GameObjects.Sprite{constructor(e,t){super(e,0,0,"sprite",`pipe/${t}-pipe-up`),this.setOrigin(0,0).setPosition(0,0),e.physics.world.enable(this),this.body.setSize(this.width,this.height),e.add.existing(this)}}class V extends Phaser.GameObjects.Sprite{constructor(e,t){super(e,0,0,"sprite",`pipe/${t}-pipe-down`),this.setOrigin(0,0).setPosition(0,-418),e.physics.world.enable(this),this.body.setSize(this.width,this.height),e.add.existing(this)}}class O extends Phaser.GameObjects.Rectangle{constructor(e,t,s,i,a){super(e,t,s,i,a),this.setOrigin(0,0),e.physics.add.existing(this,!1)}}class E extends Phaser.GameObjects.Container{constructor(e,t,s,i=!1){super(e),e.add.existing(this),this.duration=t,this.merciless=i;let a=new G(e,s),h=new V(e,s),r=new O(e,5,-418+h.height,h.width-5,418-h.height);this.add(a).add(h).add(r).setPosition(e.cameras.main.width+80,Phaser.Math.Between(200,360)).setDepth(1),this.move()}move(){if(this.merciless){let e=[-1,1][Phaser.Math.Between(0,1)],t=Phaser.Math.Between(25,35)*e,s=Phaser.Math.Between(25,35)*e*-1;this.upDown=this.scene.tweens.add({targets:this,y:{from:this.y+t,to:this.y+s},duration:900,yoyo:!0,repeat:-1})}this.tween=this.scene.tweens.add({targets:this,x:-80,duration:this.duration,loop:0,onComplete:()=>{var e;this.destroy(),null===(e=this.upDown)||void 0===e||e.stop()}})}getDuration(){return this.duration}}const M=E;class D extends Phaser.GameObjects.Container{constructor(e,t,s,i){super(e),e.add.existing(this);let h=e.add.image(e.cameras.main.width/2,80,"sprite","message/message-flappy-bird"),r=this.scene.add.image(e.cameras.main.width/2,160,"sprite","message/message-get-ready").setVisible(!1);this.playButton=new a(this.scene,e.cameras.main.width/2,370,"sprite","button/button-playgame"),this.playButton.setScaleRatio(1.2).initButton(s).setInteractive().playScale().on("pointerup",(e=>{this.playButton.playPointerUp().stopScale()})).on("pointermove",(e=>{this.playButton.playPointerMove()})),this.pauseButton=new a(this.scene,30,30,"sprite","button/button-pause"),this.pauseButton.initButton(i).setInteractive().setVisible(!1).on("pointerup",(e=>{this.pauseButton.playPointerUp()})).on("pointermove",(e=>{t.allowFly=!1})).on("pointerout",(e=>{t.allowFly=!0})),this.add(h).add(r).add(this.playButton).add(this.pauseButton).setPosition(0,0).setDepth(15)}startGame(){let e=this.getAt(0),t=this.getAt(1),s=this.getAt(2),i=this.getAt(3);e.setVisible(!1),t.setVisible(!0).setAlpha(0),s.setVisible(!1),i.setVisible(!0),this.scene.tweens.add({targets:t,props:{alpha:1},duration:300,repeat:!1}),this.scene.time.addEvent({delay:2e3,callback:()=>{this.scene.tweens.add({targets:t,props:{alpha:0},duration:300,repeat:!1,onComplete:()=>{t.setVisible(!1)}})},callbackScope:this,loop:!1})}setPauseButtonVisible(e){this.pauseButton.setVisible(e)}endGame(){this.getAt(3).setVisible(!1),this.getAt(1).setVisible(!1)}}const j=D;class R extends Phaser.Scene{constructor(){super({key:"PlayScene"}),this.playGame=()=>{this.time.delayedCall(3e3,(()=>{this.pipeGen.start()})),this.bird.idle=!1,this.bird.setPlay(),this.score.start(),this.screenContainer.startGame()},this.switchToPause=()=>{this.screenContainer.setPauseButtonVisible(!1),this.scene.pause(),this.scene.launch("PauseScene",{screenContainer:this.screenContainer})},this.hitGround=()=>{this.physics.pause(),this.bird.hitPipe||this.setEndGame(),this.bird.setDie(),this.time.delayedCall(1e3,(()=>{this.scene.launch("GameOverScene",{playerScore:this.score.getScore()})}))},this.hitPipe=(e,t)=>{this.ground.pause(),this.setEndGame(),this.bird.hitPipe=!0}}preload(){this.load.image(m,"assets/img/bg_day.png"),this.load.image(g,"assets/img/bg_night.png"),this.load.image(y,"assets/img/DustParticle.png"),this.load.atlas("sprite","assets/img/flappy-bird-sprite.png","assets/img/flappy-bird-sprite.json"),this.load.audio(S,"assets/sound/audios_flappy.mp3"),this.load.audio(w,"assets/sound/audios_collision.mp3"),this.load.audio(f,"assets/sound/audios_score.mp3"),this.load.audio(b,"assets/sound/WhoCares.mp3")}create(){this.background=new C(this,this.cameras.main.width/2,this.cameras.main.height/2),this.ground=new v(this),this.bird=new x(this,this.cameras.main.width/3,this.cameras.main.height/2),this.score=new n(this,36,this.cameras.main.width/2,80,"center"),this.pipeGen=new class{constructor(e,t,s,i){this.pipeGen=()=>{let e=!1;this.score.getScore()>=9&&(e=!0),this.score.getScore();let t=new M(this.scene,this.duration,this.pipesColor,e);this.pipesList.push(t);let s=t.getAll(),i=this.scene.physics.add.collider(this.bird,s.splice(0,2),((e,t)=>{this.scene.physics.world.removeCollider(i),this.scene.physics.world.disable(t),this.callback()})),a=this.scene.physics.add.overlap(this.bird,s,(()=>{this.scoreSound.play(),this.score.increaseScore(),this.scene.physics.world.removeCollider(a)}))},this.scene=e,this.bird=t,this.score=s,this.pipesList=[],this.callback=i,this.scoreSound=this.scene.sound.add(f),this.duration=(this.scene.cameras.main.width+160)/120*1e3,this.pipesColor=["green","brown"][Phaser.Math.Between(0,1)]}start(){this.pipeGen();let e=130*this.duration/(this.scene.cameras.main.width+80);this.timeSet=this.scene.time.addEvent({delay:e,callback:()=>{this.pipeGen()},callbackScope:this.scene,loop:!0})}stop(){this.pipesList.forEach((e=>{e.tween.stop()}))}}(this,this.bird,this.score,this.hitPipe),this.screenContainer=new j(this,this.bird,this.playGame,this.switchToPause),this.physics.add.collider(this.bird,this.ground,this.hitGround),this.hitSound=this.sound.add(w),this.addInput(),this.cameras.main.fadeIn(250,0,0,0)}addInput(){this.keys=this.input.keyboard.addKey("Space"),this.keys.on("down",(()=>{this.bird.isDeath||(this.bird.idle?this.playGame():this.bird.jump())})),this.input.mouse.disableContextMenu(),this.input.setTopOnly(!1).on("pointerdown",(e=>{!this.bird.idle&&this.bird.allowFly&&this.bird.jump()}))}setEndGame(){this.hitSound.play(),this.cameras.main.flash(),this.bird.anims.pause(),this.bird.isDeath=!0,this.score.destroy(),this.screenContainer.endGame(),this.time.removeAllEvents(),this.pipeGen.stop(),this.input.removeAllListeners(),this.tweens.getAllTweens().forEach((e=>{e.targets&&e.stop()}))}update(e,t){super.update(e,t),this.bird.isDeath||(this.background.tilePositionX+=.5,this.ground.update())}}const A=R,_={type:Phaser.AUTO,backgroundColor:"#000000",scale:{parent:"phaser-game",mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH,width:288,height:512},scene:[c,A,u,l],physics:{default:"arcade",arcade:{debug:!1}}};window.addEventListener("load",(()=>{new Phaser.Game(_)}))},204:()=>{console.log("%c %c %c %c %c Built using phaser-project-template %c https://github.com/yandeu/phaser-project-template","background: #ff0000","background: #ffff00","background: #00ff00","background: #00ffff","color: #fff; background: #000000;","background: none")}},s={};function i(e){var a=s[e];if(void 0!==a)return a.exports;var h=s[e]={exports:{}};return t[e].call(h.exports,h,h.exports,i),h.exports}i.m=t,e=[],i.O=(t,s,a,h)=>{if(!s){var r=1/0;for(d=0;d<e.length;d++){for(var[s,a,h]=e[d],n=!0,o=0;o<s.length;o++)(!1&h||r>=h)&&Object.keys(i.O).every((e=>i.O[e](s[o])))?s.splice(o--,1):(n=!1,h<r&&(r=h));if(n){e.splice(d--,1);var l=a();void 0!==l&&(t=l)}}return t}h=h||0;for(var d=e.length;d>0&&e[d-1][2]>h;d--)e[d]=e[d-1];e[d]=[s,a,h]},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={179:0};i.O.j=t=>0===e[t];var t=(t,s)=>{var a,h,[r,n,o]=s,l=0;if(r.some((t=>0!==e[t]))){for(a in n)i.o(n,a)&&(i.m[a]=n[a]);if(o)var d=o(i)}for(t&&t(s);l<r.length;l++)h=r[l],i.o(e,h)&&e[h]&&e[h][0](),e[h]=0;return i.O(d)},s=self.webpackChunkphaser_project_template=self.webpackChunkphaser_project_template||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})(),i.O(void 0,[216],(()=>i(400)));var a=i.O(void 0,[216],(()=>i(204)));a=i.O(a)})();